$('form#p_form').bind('ajax:complete', function(){

	var id = '<%= @page.id %>';
	var hours = '<%= @page.hours %>';
	var n = '<%= @page.name %>';
	var description = '<%= @page.description %>';

	$(this).parent().prev('div#new_records').append('<div class="admin_record admin_edit"><form accept-charset="UTF-8" action="/admin/professional_pages/' + id + '" class="update" data-remote="true" id="edit_professional_page_' + id + '" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="âœ“"><input name="_method" type="hidden" value="delete"><input name="authenticity_token" type="hidden" value="iLejeHNQgQ86gf0CgXjO4j5seH4VH8I9ThhwxpE8sws="></div><input class="template_id" id="professional_page_id" name="professional_page[id]" type="hidden" value="' + id + '"><label for="professional_page_name">Name: </label><div class="input_wrapper_name"><input class="name" id="professional_page_name" name="professional_page[name]" size="30" type="text" value="' + n + '"></div><label for="professional_page_hours">Design Hours: </label><div class="input_wrapper"><input id="professional_page_hours" name="professional_page[hours]" size="30" type="text" value="' + hours + '"></div><label for="professional_page_hours">Cost: </label><div class="input_wrapper"><input id="professional_page_cost" name="professional_page[cost]" size="30" type="text" value="' + hours + '"></div><a href="/admin/professional_pages/' + id + '" class="delete_button" data-method="delete" data-remote="true" rel="nofollow"></a><a href="/admin/professional_pages/' + id + '" class="update_button" data-method="put" data-remote="true" rel="nofollow"></a><div class="clear"></div><div class="desc_box" style="display: block;"><label for="professional_page_description">Description: </label><textarea class="wysiwyg-template hidden_text_area" cols="40" id="professional_page_description" name="professional_page[description]" rows="20">' + description + '</textarea><div class="clear"></div></div></form></div>');
	
		$(this).find('input, textarea').val('');

		$('.wysiwyg-template').wysiwyg('destroy');

		$('.wysiwyg-template').wysiwyg({
			 controls: {
			     strikeThrough: { visible: true },
			     underline: { visible: true },
			     subscript: { visible: true },
			     superscript: { visible: true },
			 },
			css: '/js/jswysiwyg/jquery.wysiwyg.css',
			formHeight: 30,
			formWidth: 500,
			css: { padding: '10px 10px' },
			initialContent: ''

		});


		var a = $('div.new_page_form .wysiwyg-template');
		a.wysiwyg('clear');
		//console.log($('body.wysiwyg').html());
	//	$('body.wysiwyg').remove();
		
});
